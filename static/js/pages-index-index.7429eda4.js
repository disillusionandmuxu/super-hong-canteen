(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-index"],{"16c3":function(n,t,a){"use strict";var e=a("7b30"),i=a.n(e);i.a},"7b30":function(n,t,a){var e=a("eff3");e.__esModule&&(e=e.default),"string"===typeof e&&(e=[[n.i,e,""]]),e.locals&&(n.exports=e.locals);var i=a("967d").default;i("7b1f4bfe",e,!0,{sourceMap:!1,shadowMode:!1})},8781:function(n,t,a){"use strict";a("6a54");var e=a("3639").default,i=a("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(a("2634")),s=i(a("2fdc")),o=i(a("9b1b"));a("08eb"),a("18f7"),a("fd3c"),a("f7a5"),a("64aa"),a("473f"),a("bf0f"),a("c223");var l=e(a("b4e9")),c=i(a("e4d6")),d={data:function(){return{currentPeople:0,trend:"up",historyData:Array.from({length:60},(function(n,t){return t})),dailyData:Array.from({length:24},(function(n,t){return 2*t})),chart:null,dailyChart:null,dailyTrend:"up",dailyCount:0}},computed:{trendIcon:function(){return"up"===this.trend?"../../static/up.png":"../../static/down.png"},dailyTrendIcon:function(){return"up"===this.dailyTrend?"../../static/up.png":"../../static/down.png"}},mounted:function(){this.initChart(),this.startDataPolling()},methods:{initChart:function(){this.chart=l.init(document.getElementById("peopleChart")),this.dailyChart=l.init(document.getElementById("dailyChart"));var n={tooltip:{trigger:"axis",backgroundColor:"rgba(50,50,50,0.9)",borderColor:"#333",textStyle:{color:"#fff",fontSize:24},axisPointer:{type:"shadow",label:{backgroundColor:"#6B7280"}}},grid:{left:"3%",right:"3%",bottom:"12%",top:"10%",containLabel:!0},xAxis:{type:"category",axisLine:{lineStyle:{color:"#CBD5E1"}},axisLabel:{fontSize:20,color:"#64748B"},splitLine:{show:!0,lineStyle:{color:"#F1F5F9",opacity:.6}}},yAxis:{type:"value",axisLine:{show:!1},axisLabel:{fontSize:20,color:"#64748B"},splitLine:{lineStyle:{color:"#F1F5F9",opacity:.6}}}},t=(0,o.default)((0,o.default)({title:{text:"最近1小时人数变化",left:"center",fontSize:5,textStyle:{opacity:.6}}},n),{},{xAxis:(0,o.default)((0,o.default)({},n.xAxis),{},{data:Array.from({length:60},(function(n,t){return t+"分"}))}),series:[{type:"line",data:this.historyData,smooth:!0,symbol:"circle",symbolSize:8,itemStyle:{color:"#3B82F6",borderColor:"#fff",borderWidth:2},lineStyle:{width:3,shadowColor:"rgba(59,130,246,0.2)",shadowBlur:10,shadowOffsetY:8},areaStyle:{color:new l.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(59,130,246,0.3)"},{offset:1,color:"rgba(59,130,246,0.01)"}])},animationDuration:2e3,animationEasing:"cubicOut"}]}),a=(0,o.default)((0,o.default)({title:{text:"最近1天人数变化",left:"center",fontSize:5,textStyle:{opacity:.6}}},n),{},{xAxis:(0,o.default)((0,o.default)({},n.xAxis),{},{data:Array.from({length:24},(function(n,t){return t+"时"}))}),series:[(0,o.default)((0,o.default)({},t.series[0]),{},{data:this.dailyData,itemStyle:{color:"#10B981",borderColor:"#fff"},lineStyle:{shadowColor:"rgba(16,185,129,0.2)"},areaStyle:{color:new l.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(16,185,129,0.3)"},{offset:1,color:"rgba(16,185,129,0.01)"}])}})]});this.chart.setOption(t),this.dailyChart.setOption(a)},fetchData:function(){var n=this;return(0,s.default)((0,r.default)().mark((function t(){var a,e,i,s,o,l,d,u;return(0,r.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,uni.request({url:"".concat(c.default.baseURL,"/data"),method:"GET",timeout:8e3});case 3:a=t.sent,a.data&&(s=Array.isArray(a.data.history)?a.data.history:[],o=a.data.current||0,l=s.slice(-60).map(Number),d=s.slice(-1440).map(Number),u=Array.from({length:24},(function(n,t){var a=d.slice(60*t,60*(t+1)).reduce((function(n,t){return n+t}),0);return a})),n.currentPeople=o,n.trend=o>n.currentPeople?"up":"down",n.historyData=l,n.dailyCount=o,n.dailyTrend=o>n.dailyCount?"up":"down",n.dailyData=u,null===(e=n.chart)||void 0===e||e.setOption({series:[{data:l}]}),null===(i=n.dailyChart)||void 0===i||i.setOption({series:[{data:u}]})),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.error("数据获取失败:",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},startDataPolling:function(){setInterval(this.fetchData,5e3)},navigateTo:function(n){uni.navigateTo({url:n})},handleMonitor:function(){var n=(new Date).getTime();window.open("".concat("/super-hong-canteen/static/","monitor.html?t=").concat(n),"_blank")}}};t.default=d},"920c":function(n,t,a){"use strict";a.r(t);var e=a("8781"),i=a.n(e);for(var r in e)["default"].indexOf(r)<0&&function(n){a.d(t,n,(function(){return e[n]}))}(r);t["default"]=i.a},b6d2:function(n,t,a){"use strict";a.r(t);var e=a("d072"),i=a("920c");for(var r in i)["default"].indexOf(r)<0&&function(n){a.d(t,n,(function(){return i[n]}))}(r);a("16c3");var s=a("828b"),o=Object(s["a"])(i["default"],e["b"],e["c"],!1,null,"7017d696",null,!1,e["a"],void 0);t["default"]=o.exports},d072:function(n,t,a){"use strict";a.d(t,"b",(function(){return e})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){}));var e=function(){var n=this,t=n.$createElement,a=n._self._c||t;return a("v-uni-view",{staticClass:"flex-col page"},[a("v-uni-view",{staticClass:"flex-col justify-start items-start text-wrapper"},[a("v-uni-text",{staticClass:"font text"},[n._v("餐厅人数")])],1),a("v-uni-view",{staticClass:"flex-row equal-division"},[a("v-uni-view",{staticClass:"flex-col equal-division-item section"},[a("v-uni-text",{staticClass:"self-start font_2 text_2"},[n._v("最近1小时")]),a("v-uni-view",{staticClass:"flex-row self-stretch mt-15"},[a("v-uni-text",{staticClass:"font_3"},[n._v(n._s(n.currentPeople))]),a("v-uni-image",{staticClass:"image ml-3",attrs:{src:n.trendIcon}})],1),a("v-uni-view",{staticClass:"flex-col justify-start items-center self-stretch mt-15"},[a("v-uni-canvas",{staticClass:"chart",attrs:{id:"peopleChart"}})],1)],1),a("v-uni-view",{staticClass:"ml-8 flex-col equal-division-item section_2"},[a("v-uni-view",{staticClass:"flex-col group"},[a("v-uni-text",{staticClass:"self-start font_2 text_3"},[n._v("最近1天")]),a("v-uni-view",{staticClass:"flex-row self-stretch mt-15"},[a("v-uni-text",{staticClass:"font_3"},[n._v(n._s(n.dailyCount))]),a("v-uni-image",{staticClass:"ml-4 image",attrs:{src:n.dailyTrendIcon}})],1)],1),a("v-uni-view",{staticClass:"flex-col justify-start items-center"},[a("v-uni-canvas",{staticClass:"chart",attrs:{id:"dailyChart"}})],1)],1)],1),a("v-uni-view",{staticClass:"grid"},[a("v-uni-view",{staticClass:"flex-col items-center relative grid-item",on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.navigateTo("/pages/index/temperature")}}},[a("v-uni-image",{staticClass:"image_4",attrs:{src:"/static/temperature.png"}}),a("v-uni-text",{staticClass:"font_4 mt-7"},[n._v("温度")])],1),a("v-uni-view",{staticClass:"flex-col items-center relative grid-item",on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.navigateTo("/pages/index/humidity")}}},[a("v-uni-image",{staticClass:"image_4",attrs:{src:"/static/humidity.png"}}),a("v-uni-text",{staticClass:"font_4 mt-7"},[n._v("湿度")])],1),a("v-uni-view",{staticClass:"flex-col items-center relative grid-item",on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.navigateTo("/pages/index/co2")}}},[a("v-uni-image",{staticClass:"image_4",attrs:{src:"/static/co2.png"}}),a("v-uni-text",{staticClass:"font_4 mt-7"},[n._v("二氧化碳浓度")])],1),a("v-uni-view",{staticClass:"flex-col items-center relative grid-item",on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.navigateTo("/pages/index/shine")}}},[a("v-uni-image",{staticClass:"image_4",attrs:{src:"/static/shine.png"}}),a("v-uni-text",{staticClass:"font_4 mt-7"},[n._v("光照强度")])],1),a("v-uni-view",{staticClass:"flex-col items-center relative grid-item",on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.navigateTo("/pages/index/smoke")}}},[a("v-uni-image",{staticClass:"image_4",attrs:{src:"/static/smoke.png"}}),a("v-uni-text",{staticClass:"font_4 mt-7"},[n._v("烟雾浓度")])],1),a("v-uni-view",{staticClass:"flex-col items-center relative grid-item",on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.navigateTo("/pages/index/fan")}}},[a("v-uni-image",{staticClass:"image_4",attrs:{src:"/static/fan.png"}}),a("v-uni-text",{staticClass:"mt-8 font_4"},[n._v("风扇")])],1),a("v-uni-view",{staticClass:"flex-col items-center relative grid-item",on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.navigateTo("/pages/index/light")}}},[a("v-uni-image",{staticClass:"image_4",attrs:{src:"/static/light.png"}}),a("v-uni-text",{staticClass:"mt-8 font_4"},[n._v("灯光")])],1),a("v-uni-view",{staticClass:"flex-col items-center relative grid-item",on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.handleMonitor.apply(void 0,arguments)}}},[a("v-uni-image",{staticClass:"image_4",attrs:{src:"/static/monitor.png"}}),a("v-uni-text",{staticClass:"font_4 mt-7"},[n._v("监控")])],1),a("v-uni-view",{staticClass:"analyse-container"},[a("v-uni-view",{staticClass:"flex-col items-center relative grid-item",staticStyle:{width:"1000rpx",margin:"0 auto"},on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.navigateTo("/pages/index/analyse")}}},[a("v-uni-image",{staticClass:"image_4",attrs:{src:"/static/coin.png"}}),a("v-uni-text",{staticClass:"mt-8 font_4"},[n._v("财报")])],1)],1)],1)],1)},i=[]},e4d6:function(n,t,a){"use strict";a("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={baseURL:uni.getStorageSync("esp32_ip")||"http://192.168.4.1:5000"};t.default=e},eff3:function(n,t,a){var e=a("c86c");t=e(!1),t.push([n.i,'\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* 页面基础样式 */.page[data-v-7017d696]{padding:%?11.54?% 0 %?23.08?%;width:100%;overflow-y:auto;overflow-x:hidden;height:100%;position:relative;background:linear-gradient(hsla(0,0%,100%,.92),rgba(245,248,250,.93) 50%,rgba(245,248,250,.88)),linear-gradient(180deg,hsla(0,0%,100%,.3) 0,hsla(0,0%,100%,.15) 30%,hsla(0,0%,100%,.05) 80%,hsla(0,0%,100%,.01)),url(https://raw.githubusercontent.com/disillusionandmuxu/super-hong-canteen/main/static/canteen.png) no-repeat 50% fixed;background-size:cover}\n/* 背景遮罩 */.page[data-v-7017d696]::before{content:"";position:fixed;top:0;left:0;width:100%;height:100%;background:hsla(0,0%,100%,.1);-webkit-backdrop-filter:blur(%?4?%);backdrop-filter:blur(%?4?%);z-index:-1}\n/* 图表容器 */.chart[data-v-7017d696]{width:100%!important;height:%?320?%!important;min-height:%?280?%;z-index:2}\n/* 数据卡片 */.section[data-v-7017d696], .section_2[data-v-7017d696]{flex:1;padding:%?20?%;margin:%?10?%;background:hsla(0,0%,100%,.88);border-radius:%?20?%;-webkit-backdrop-filter:blur(%?12?%);backdrop-filter:blur(%?12?%);box-shadow:0 %?8?% %?32?% rgba(30,41,59,.04)}\n/* 文字标题容器 */.text-wrapper[data-v-7017d696]{padding:%?15?% 0 %?10?%!important;background-color:rgba(247,248,250,.5)!important;-webkit-backdrop-filter:blur(%?8?%);backdrop-filter:blur(%?8?%);margin:%?40?% %?30?% 0;border-radius:%?12?%;width:auto;display:inline-block;border:%?1?% solid rgba(226,232,240,.3)}.font[data-v-7017d696]{font-size:%?36?%;color:#1d2129;text-shadow:0 %?2?% %?4?% hsla(0,0%,100%,.8)}\n/* 通用样式 */.font_2[data-v-7017d696]{font-size:%?24?%;color:#64748b}.font_3[data-v-7017d696]{font-size:%?32?%;color:#1e3a8a;font-weight:600}.font_4[data-v-7017d696]{font-size:%?32?%;color:#334155}.image[data-v-7017d696]{width:%?32?%;height:%?32?%}\n/* 图表悬停效果 */\n/* 鼠标悬停增强效果 */.image_2[data-v-7017d696]:hover{-webkit-transform:scale(1.08);transform:scale(1.08);cursor:pointer}.image_3[data-v-7017d696]{position:relative;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.image_4[data-v-7017d696]{width:%?80?%;height:%?80?%;transition:-webkit-transform .3s;transition:transform .3s;transition:transform .3s,-webkit-transform .3s}\n/* 在样式表中添加 */.analyse-container[data-v-7017d696]{grid-column:1/-1; /* 跨所有列 */display:flex;justify-content:center;margin-top:%?20?%}\n/* 网格布局 */.grid[data-v-7017d696]{display:grid;grid-template-columns:repeat(4,1fr);grid-auto-rows:auto;gap:%?25?%;padding:%?20?%;margin:%?80?% %?20?% 0}.grid-item[data-v-7017d696]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:96%;height:%?180?%;padding:%?20?%;background:linear-gradient(145deg,#fff,#f8fafc);border-radius:%?25?%;box-shadow:0 %?6?% %?24?% rgba(99,102,241,.1),inset 0 %?-2?% %?4?% rgba(0,0,0,.05);transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden}.grid-item[data-v-7017d696]:hover{-webkit-transform:translateY(%?-4?%);transform:translateY(%?-4?%);box-shadow:0 %?12?% %?32?% rgba(99,102,241,.2),inset 0 %?-2?% %?6?% rgba(0,0,0,.08)}.grid-item[data-v-7017d696]:active{-webkit-transform:translateY(%?2?%);transform:translateY(%?2?%);box-shadow:0 %?4?% %?16?% rgba(99,102,241,.1),inset 0 %?2?% %?4?% rgba(0,0,0,.05)}\n/* 响应式适配 */@media (max-width:768px){.grid[data-v-7017d696]{grid-template-columns:repeat(2,1fr)}.chart[data-v-7017d696]{height:%?240?%!important}}@media (max-width:480px){.grid[data-v-7017d696]{grid-template-columns:1fr}.chart[data-v-7017d696]{height:%?200?%!important}}',""]),n.exports=t}}]);